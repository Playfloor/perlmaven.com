=title Цикл for в Perl
=timestamp 2013-12-20T12:00:01
=indexes for, foreach, loop, infinite loop
=status show
=original for-loop-in-perl
=books beginner
=author szabgab
=translator spidamoo
=comments_disqus_enable 0

=abstract start

В этой части <a href="/perl-tutorial">Учебника Perl</a> мы поговорим о <b>цикле for в Perl</b>. 
Кое-кто называет его <b>цикл for в стиле C</b>, но на самом деле такая конструкция присутствует во
многих языках.

=abstract end

<h2>Цикл for в Perl</h2>

Ключевое слово <b>for</b> в Perl может работать двумя разными способами. Один из них повторяет 
делает то же самое, что и цикл <b>foreach</b>, а второй работает как цикл for в стиле C, с тремя 
частями. Он называется &laquo;в стиле C&raquo;, хотя такое есть во многих языках.

Я опишу, как это работает, хотя лично я предпочитаю использовать цикл <hl>foreach</hl>, как описано
в разделе о <a href="/massivy-v-perl">массивах perl</a>.

Ключевые слова <hl>for</hl> и <hl>foreach</hl> могут использоваться как синонимы. Perl поймет, что
вы имели в виду.

Управляющая часть <b>цикла for в стиле C</b> состоит из трех частей. В общем случае цикл выглядит 
так, но в принципе любую из четырх составляющих можно опустить.

<code lang="perl">
for (ИНИЦИАЛИЗАЦИЯ; ПРОВЕРКА; ШАГ) {
  ТЕЛО;
}
</code>

В качестве примера взгляните на этот код:

<code lang="perl">
for (my $i=0; $i <= 9; $i++) {
   print "$i\n";
}
</code>

ИНИЦИАЛИЗАЦИЯ выполняется один раз, когда ход программы достигает цикла.

Сразу после этого выполняется ПРОВЕРКА. Если результат выполнения ложный, весь цикл пропускается.
Если ПРОВЕРКА показывает истину, выполняется ТЕЛО, а затем ШАГ.

(Чтобы узнать, что подразумевается под истиной и ложью, обратитесь к статье о 
<a href="/bulevy-znacheniya-v-perl">булевых значениях в Perl</a>.)

Затем ПРОВЕРКА выполняется снова и снова, до тех пор, пока ее результат остается истинным. Так что
это может выглядеть примерно так:

<code>
ИНИЦИАЛИЗАЦИЯ

ПРОВЕРКА
ТЕЛО
ШАГ

ПРОВЕРКА
ТЕЛО
ШАГ

...

ПРОВЕРКА
</code>


<h2>foreach</h2>

Цикл, описанный выше можно также записать в форме <b>цикла foreach</b>, и в таком случае, мне 
кажется, код выглядит намного яснее:

<code lang="perl">
foreach my $i (0..9) {
  print "$i\n";
}
</code>

Как уже упоминалось, эти два ключевых слова являются синонимами, так что некоторые используют 
<hl>for</hl> в <b>циклах foreach</b>, например так:

<code lang="perl">
for my $i (0..9) {
  print "$i\n";
}
</code>

<h2>Части цикла for в perl</h2>

ИНИЦИАЛИЗАЦИЯ нужна, очевидно, для инициализации некой переменной. Она выполняется лишь однажды.

ПРОВЕРКА это некое логическое выражение, в котором проверяется, нужно ли закончить цикл или 
продолжать его. Она выполняется как минимум однажды. ПРОВЕРКА выполняется на один раз больше, чем
ТЕЛО и ШАГ.

ТЕЛО это набор выражений, как правило таких, которые должны выполниться несколько раз, хотя в 
некоторых случаях может быть уместно использование пустого блока в качестве ТЕЛА. Впрочем, наверное
все эти случаи можно переписать лучшим способом.

ШАГ это еще одно действие, обычно используемое, чтобы увеличить или уменьшить некий индекс. Его тоже
можно оставить пустым, если, например, это изменение уже делается в ТЕЛЕ.

<h2>Бесконечный цикл</h2>

С помощью <b>цикла for</b> можно написать бесконечный цикл:

<code lang="perl">
for (;;) {
  # сделать что-нибудь
}
</code>

Обычно его пишут с помощью <hl>while</hl>:

<code lang="perl">
while (1) {
  # сделать что-нибудь
}
</code>

Этот прием описан в главе о <a href="/tsikl-while">цикле while в perl</a>.

<h2>perldoc</h2>

Официальное описание цикла for можно почитать в разделе <b>perlsyn</b> 
<a href="http://perldoc.perl.org/perlsyn.html#For-Loops">документации Perl</a>.




